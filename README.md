# A/B тест в игре Cookie Cats

 ![картинка_игры](cookie_cats_image.jpg)
 
Целью проекта яввляется анализ результатов и дизайн A/B теста в игре Cookie Cats. Результаты анализа можно посмотреть [здесь](ab_test_cookie_cats.ipynb).

---

## Данные

Можно скачать данные по [ссылке](https://www.kaggle.com/datasets/mursideyarkin/mobile-games-ab-testing-cookie-cats/data).

Этот набор данных содержит результаты A/B тестирования в игре Cookie Cats для изучения того, что происходит, когда первый gate уровень в игре перемещаются с 30-го на 40-й уровень. Когда игрок устанавливал игру, ему случайным образом назначалось значение: либо gate_30, либо gate_40.

У нас есть данные о 90 189 игроках, которые установили игру во время выполнения A/B-теста. Когда игрок устанавливал игру, он или она были случайным образом были опредлены в группу (или gate_30, или gate_40).

---
**Так как в описании набора данных, не хватает полного описания самого теста, я попробовал задизайнить этот A/B полноценно. Возможно домысливая в некоторых местах.**

## Дизайн эксперимента

### Суть эксперимента

#### Бизнес-проблема

У нас есть игра Cookie Cats. В ней есть gate уровни - это особые уровени, на которых игрок сталкивается с определенным барьером или испытанием, которое необходимо преодолеть для продвижения дальше. Мы хотим, чтобы пользователи, играли в игру больше, поэтому попробуем перенсти gate уровень дальше. 



#### Гипотеза

**Если** перенести gate уровень с 30 на 40

**Тогда** это увеличит число сыгранных раундов на XX (нужно обсуждать!),

**Потому что** gate уровень обладает большой сложностью и это позволит пользователям играть дольше не испытвая особенных трудностей в прохождении игры

### Метрики

Исходя из доступных нам данных в эксперименте будем использовать число игровых раундов. В качестве нулевой гипотезы будет равенство средних. Также используем дополнительные метрики: retention за 1 и за 7 дней. Для числа раундов будем использовать следующий критерий: T-тест или Mann-Whitney, а для retention используем бутстрап.
 

### Принятие решения

- **Критерий успеха:** Увеличение числа сыгранных раундов на XX или более, при статистически значимом результате (p-value < 0.05) и без ухудшения дополнительных метрик.

- **Критерий провала:** Отсутствие статистически значимого увеличения доли вернувшихся пользователей или статистически значимое уменьшение доли вернувшихся пользоватлей, или значительное ухудшение дополнительных метрик.

### Аудитория

- **Географические ограничения:** Проводим эксперимент во всех регионах, где есть достаточное количество пользователей для получения значимых результатов.
- **Платформы:** Эксперимент проводится для пользоватлей ПК и в мобильном приложении, чтобы учесть всех пользователей.
- **Версия приложения:** ХХ и выше.
- **Источник трафика:** Включаем все источники трафика (прямые визиты, органический поиск, платная реклама и т.д.).
- **Тип пользователей:** Эксперимент проводится на новых пользователях.

### Группы

- группа А – контроль (gate_30): 50% аудитории.
- группа Б – тест (gate_40): 50% аудитории.

### Размер выборки и время

После этого можно было бы расчитать размер выборки (Sample Size).

Зная, базовое число сыгранных раундов = ХX, MDE = X и стандартные уровни значимости ($\alpha$ = 0.05) и мощности (1 - $\beta$ = 0.8).

Ожидаемую дату окончания можно расчитать по формуле:

$$\frac{2N}{DAU},$$
где N - объем нашей выборки.

Или наоборот можем катить на 1 или 2 недели, тогда считаем MDE.

### Даты

Здесь определяем даты и время проведения теста.


#### Применение методов снижения дисперсии

Также стоит отметь некоторые методы, которые используются при A/B тестировании для снижения дисперсии:

- Удаление выбросов
- Стратификация сэмплирования
- CUPED


## Разведочный анализ

Была произведена предобработка датасета, проверка на пропущенные значения и потенциальные ошибки, а именно:
* Был проанализирован баланс групп
* Были про анализированы распределения метрик
* Было удалено аномальное значения


Подробнее об этом рассказывается в [блокноте](ab_test_cookie_cats.ipynb).

## Анализ результатов A/B теста

Для сравнения средних значений числа сыгранных раундов использовался критерий Манна-Уитни, потому что выборочные средние не были нормально распределены. Для сравнения retention исрользовался бутсрап.
В итоге, после введения изменения среднее значение числа сыгранных раундов изменилось в худшую сторону. Результаты теста Манна-Уитни не являются статистически значимвыми. Также новое изменение влияет на retention в худшую сторону. Результаты бутстрапа показывают ухудшения для 7-дневного retention в 99.9% случаев, а для однодневного в 96.3% случаев.

Таким образом, данная фича не рекомендуется к использованию. Лучше оставить gate на 30 уровне.

Подробнее об этом рассказывается в [блокноте](ab_test_cookie_cats.ipynb).

